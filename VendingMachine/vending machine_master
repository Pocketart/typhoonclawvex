#include <Wire.h>
#include <Keypad.h>

char key;
const byte ROWS = 4;
const byte COLS = 4;
const int spd = 255;  //max value 255, 100 is too low

//motor1
#define enA 9
#define in1 7
#define in2 8

//motor2
#define enA2 5
#define in3 4
#define in4 6

char keys[ROWS][COLS] = {
  {'1','2','3','A'},
  {'4','5','6','B'},
  {'7','8','9','C'},
  {'*','0','#','D'}
};
byte rowPins[ROWS] = {21, 20, 19 ,18}; 
byte colPins[COLS] = {15, 14, 16, 10}; 

Keypad keypad = Keypad ( makeKeymap(keys), rowPins, colPins, ROWS, COLS);

void setup() {
  Wire.begin();
  pinMode(enA, OUTPUT);
  pinMode(in1, OUTPUT);
  pinMode(in2, OUTPUT);
  pinMode(enA2, OUTPUT);
  pinMode(in3, OUTPUT);
  pinMode(in4, OUTPUT);
  analogWrite(enA, 255);
  analogWrite(enA2, 255);
}

void loop() {
  key = keypad.getKey();
  if (key != NO_KEY){
    Serial.println(key);
    if(key == '1'){
      analogWrite(enA, 255);
      digitalWrite(in1, HIGH);
      digitalWrite(in2, LOW);
      delay(600);
      digitalWrite(in1, LOW);
    }
    else if(key == '2'){
      analogWrite(enA2, 255); 
      digitalWrite(in3, HIGH);
      digitalWrite(in4, LOW);
      delay(800);
      digitalWrite(in3, LOW);
    }
    else{
      Wire.beginTransmission(8);
      Wire.write(key);
      Wire.endTransmission();
    }
  }
}
